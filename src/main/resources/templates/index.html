<!DOCTYPE html>
<html lang="en">
  <header th:replace="fragments/header :: header"></header>
  <body class="w-full">
    <div th:replace="fragments/navbar :: navbar"></div>

    <!-- Main content with top padding to avoid navbar overlap -->
    <main class="pt-20 pb-12 min-h-screen">
      <!-- Product Grid Section -->
      <div class="mt-8 px-4">
        <h2 class="text-center text-4xl font-bold text-gray-900 mb-8">
          Our Products
        </h2>

        <!-- Check if products exist -->
        <div
          th:if="${products == null || products.isEmpty()}"
          class="text-center py-12"
        >
          <p class="text-gray-600 text-lg">
            No products available. Create your first product above!
          </p>
        </div>

        <!-- Product Grid -->
        <div
          th:if="${products != null && !products.isEmpty()}"
          class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
        >
          <!-- Product Card Loop -->
          <div
            th:each="product : ${products}"
            class="w-full bg-white p-6 border border-gray-200 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300"
          >
            <!-- Product Image -->
            <a th:href="@{/products/{id}/edit(id=${product.id})}">
              <img
                th:if="${product.imagePath != null && !product.imagePath.isEmpty()}"
                th:src="${product.imagePath}"
                th:alt="${product.name}"
                class="rounded-lg mb-6 w-full h-48 object-cover"
              />
              <div
                th:if="${product.imagePath == null || product.imagePath.isEmpty()}"
                class="rounded-lg mb-6 w-full h-48 bg-gray-200 flex items-center justify-center"
              >
                <span class="text-gray-400 text-sm">No Image</span>
              </div>
            </a>

            <div>
              <!-- Product Name -->
              <a th:href="@{/products/{id}/edit(id=${product.id})}">
                <h5
                  class="text-xl text-gray-900 font-semibold tracking-tight mb-2 hover:text-blue-600 line-clamp-2 min-h-[3.5rem]"
                  th:text="${product.name}"
                >
                  Product Name
                </h5>
              </a>

              <!-- Product Description -->
              <p
                th:if="${product.description != null && !product.description.isEmpty()}"
                class="text-gray-600 text-sm mb-4 line-clamp-2 min-h-[2.5rem]"
                th:text="${product.description}"
              >
                Product description
              </p>
              <p
                th:if="${product.description == null || product.description.isEmpty()}"
                class="text-gray-400 text-sm mb-4 min-h-[2.5rem]"
              >
                No description available
              </p>

              <!-- Price and Action -->
              <div class="flex items-center justify-between mt-4">
                <span
                  class="text-3xl font-bold text-gray-900"
                  th:text="'$' + ${#numbers.formatDecimal(product.price, 1, 2)}"
                >
                  $0.00
                </span>
                <a
                  th:href="@{/products/{id}/edit(id=${product.id})}"
                  class="inline-flex items-center text-white bg-blue-600 hover:bg-blue-700 border border-transparent focus:ring-4 focus:ring-blue-300 shadow-sm font-medium rounded-lg text-sm px-4 py-2.5 focus:outline-none transition-colors"
                >
                  <svg
                    class="w-4 h-4 me-1.5"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"
                    />
                  </svg>
                  Edit
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer th:replace="fragments/footer :: footer"></footer>
  </body>
</html>
